{"version":3,"sources":["program-table.min.js"],"names":["$","document","ready","programTableMobileFixed","$header","$heading","$subnavMenu","scrollTop","window","width","outerHeight","css","programTableScroll","$tableHeading","$scroller","$timelineDate","tableTopPosition","position","top","topPos","addClass","removeClass","programTableResize","eventsViewPortWidth","each","this","outerWidth","tableCellWidth","data","baron","scroller","bar","scrollingCls","draggingCls","direction","impact","controls","track","click","currentScroll","scrollLeft","currentShift","forwardShift","scrollAmount","hasClass","animate","height","scroll","resize","e","preventDefault","stopPropagation","$link","active","url","spin","ajax","processData","contentType","cache","dataType","done","fail","jqXHR","textStatus","errorThrown","alert","console","log","always"],"mappings":"AAAAA,EAAEC,UAAUC,MAAM,WA6Cd,SAASC,IAGL,IAAIC,EAAUJ,EAAE,gBACZK,EAAWL,EAAE,iBACbM,EAAcN,EAAE,6BAChBO,EAAYP,EAAEQ,QAAQD,YAGtBP,EAAEQ,QAAQC,SAAW,KACrBF,EAAYH,EAAQM,eAEpBL,EAASM,IAAK,MAAOJ,EAAYH,EAAQM,eACzCJ,EAAYK,IAAK,MAAOJ,EAAYH,EAAQM,iBAE5CL,EAASM,IAAK,MAAO,GACrBL,EAAYK,IAAK,MAAO,IAIhC,SAASC,IACL,IAAIC,EAAgBb,EAAE,0BAClBc,EAAYd,EAAE,yBACde,EAAgBf,EAAE,gCAClBO,EAAYP,EAAEQ,QAAQD,YACtBS,EAAmBhB,EAAE,4BAA4BiB,WAAWC,IAEhE,GAAIX,EAAYS,EAAkB,CAC9B,IAAIG,EAASZ,EAAYS,EACzBF,EAAUM,SAAS,eACnBP,EAAcF,IAAI,MAAOQ,GACzBL,EAAUH,IAAI,aAAcQ,GAC5BJ,EAAcJ,IAAI,MAAOQ,QAEzBL,EAAUO,YAAY,eACtBR,EAAcF,IAAI,MAAO,GACzBG,EAAUH,IAAI,aAAc,GAC5BI,EAAcJ,IAAI,MAAO,GAG7BR,IAGJ,SAASmB,IAEL,IAAIC,EAAsB,EAE1BvB,EAAE,+BAA+BwB,KAAK,WAClCD,GAAuBvB,EAAEyB,MAAMC,eAGnC1B,EAAE,+BAA+BW,IAAI,QAASY,EAAsB,GAEpEpB,IAjGJ,IAAIwB,EAAiB3B,EAAE,mCAAmC4B,KAAK,6BAA+B,IAG9FC,OACIC,SAAU,+BACVC,IAAK,8BACLC,aAAc,aACdC,YAAa,YACbC,UAAW,IACXC,OAAQ,aACTC,UACCC,MAAO,mCAKXrC,EAAE,iEAAiEsC,MAAM,WACrE,IAAIC,EAAgBvC,EAAE,gCAAgCwC,aAClDC,EAAeF,EAAcZ,EAC7Be,EAAef,EAAec,EAE9BE,EAAe,EAGfA,GAJY3C,EAAEyB,MAAMmB,SAAS,iCAAmC,EAAI,GAGxD,EACGH,EAAeF,EAAgBG,EAAeH,EAAgBZ,EAE9Dc,EAAeF,EAAgBE,EAAeF,EAAgBZ,EASjF3B,EAAE,gCAAgC6C,SAC9BL,WAAeG,GAChB,OAGP3C,EAAE,gCACGW,IAAI,SAAUX,EAAE,0BAA0B8C,UAC1CnC,IAAI,gBAAiBX,EAAE,yBAAyB8C,UA0DrDlC,IACAU,IAEAtB,EAAEQ,QAAQuC,OAAOnC,GACjBZ,EAAEQ,QAAQwC,OAAO1B,GAEjBtB,EAAE,4BAA4BsC,MAAM,SAAUW,GAC1CA,EAAEC,iBACFD,EAAEE,kBAEF,IAAIC,EAAQpD,EAAEyB,MACV4B,EAASD,EAAMR,SAAS,UACxBU,EAAMF,EAAMxB,KAAK,qBAAuB,cAAgByB,EAE5DrD,EAAE,QAAQuD,KAAK,QAAS,QAExBvD,EAAEwD,MACEF,IAAKA,EACLG,aAAa,EACbC,aAAa,EACbC,OAAO,EACPC,SAAU,SACXC,KAAK,SAAUjC,GACVA,IACAyB,EAASD,EAAM/B,YAAY,UAAY+B,EAAMhC,SAAS,aAE3D0C,KAAK,SAAUC,EAAOC,EAAYC,GACjCC,MAAM,sHACNC,QAAQC,IAAIL,GACZI,QAAQC,IAAIH,KACbI,OAAO,WACNrE,EAAE,QAAQuD,MAAK","file":"../program-table.min.js","sourcesContent":["$(document).ready(function () {\n    var tableCellWidth = $('[data-program-table-cell-width]').data('program-table-cell-width') || 260;\n\n    // Horizontal scroller\n    baron({\n        scroller: '.js-program-table-scrollable',\n        bar: '.js-program-table-scrollbar',\n        scrollingCls: '_scrolling',\n        draggingCls: '_dragging',\n        direction: 'h',\n        impact: 'scroller'\n    }).controls({\n        track: '.js-program-table-scroll-track'\n        //forward: '.js-program-table-scroll-right',\n        //backward: '.js-program-table-scroll-left'\n    });\n\n    $('.js-program-table-scroll-right, .js-program-table-scroll-left').click(function() {\n        var currentScroll = $('.js-program-table-scrollable').scrollLeft(),\n            currentShift = currentScroll%tableCellWidth,\n            forwardShift = tableCellWidth-currentShift,\n            direction = $(this).hasClass('js-program-table-scroll-left') ? -1 : 1,\n            scrollAmount = 0;\n\n        if (direction > 0) {\n            scrollAmount = currentShift ? currentScroll + forwardShift : currentScroll + tableCellWidth;\n        } else {\n            scrollAmount = currentShift ? currentScroll - currentShift : currentScroll - tableCellWidth;\n        }\n\n        /*\n        console.log('currentShift: ' + currentShift);\n        console.log('dir: ' + direction);\n        console.log('scrollAmount: ' + scrollAmount);\n        */\n\n        $('.js-program-table-scrollable').animate({\n            'scrollLeft':  scrollAmount\n        }, 200);\n    });\n\n    $('.program-table-timeline-date')\n        .css('height', $('.program-table-heading').height())\n        .css('margin-bottom', $('.program-table-scroll').height());\n\n    function programTableMobileFixed() {\n        // Fixed program nav on mobiles\n\n        var $header = $('.main-header'),\n            $heading = $('.main-heading'),\n            $subnavMenu = $('.subnav-list-program-menu'),\n            scrollTop = $(window).scrollTop();\n\n        if (\n            $(window).width() <= 560 &&\n            scrollTop > $header.outerHeight()\n        ) {\n            $heading.css( 'top', scrollTop - $header.outerHeight() );\n            $subnavMenu.css( 'top', scrollTop - $header.outerHeight() );\n        } else {\n            $heading.css( 'top', 0 );\n            $subnavMenu.css( 'top', 0 );\n        }\n    }\n\n    function programTableScroll() {\n        var $tableHeading = $('.program-table-heading'),\n            $scroller = $('.program-table-scroll'),\n            $timelineDate = $('.program-table-timeline-date'),\n            scrollTop = $(window).scrollTop(),\n            tableTopPosition = $('.js-program-table-scroll').position().top;\n\n        if (scrollTop > tableTopPosition) {\n            var topPos = scrollTop - tableTopPosition;\n            $scroller.addClass('with-shadow');\n            $tableHeading.css('top', topPos);\n            $scroller.css('margin-top', topPos);\n            $timelineDate.css('top', topPos);\n        } else {\n            $scroller.removeClass('with-shadow');\n            $tableHeading.css('top', 0);\n            $scroller.css('margin-top', 0);\n            $timelineDate.css('top', 0);\n        }\n\n        programTableMobileFixed();\n    }\n\n    function programTableResize() {\n        // Global events width\n        var eventsViewPortWidth = 0;\n\n        $('.program-table-heading-cell').each(function () {\n            eventsViewPortWidth += $(this).outerWidth();\n        });\n\n        $('.program-table-event-global').css('width', eventsViewPortWidth - 1);\n\n        programTableMobileFixed();\n    }\n\n    programTableScroll();\n    programTableResize();\n\n    $(window).scroll(programTableScroll);\n    $(window).resize(programTableResize);\n\n    $('[data-program-table-fav]').click(function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        var $link = $(this),\n            active = $link.hasClass('active'),\n            url = $link.data('program-table-fav') + \"?activate=\" + !active;\n\n        $('body').spin('large', '#000');\n\n        $.ajax({\n            url: url,\n            processData: false,\n            contentType: false,\n            cache: false,\n            dataType: 'json'\n        }).done(function (data) {\n            if (data) {\n                active ? $link.removeClass('active') : $link.addClass('active');\n            }\n        }).fail(function (jqXHR, textStatus, errorThrown) {\n            alert('Ошибка отправки данных. Пожалуйста, попробуйте ещё раз. Error while loading data. Please, try again or contact us.');\n            console.log(jqXHR);\n            console.log(errorThrown);\n        }).always(function () {\n            $('body').spin(false);\n        });\n\n    })\n});\n\n"]}